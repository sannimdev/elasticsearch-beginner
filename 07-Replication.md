# Replication

-   기본적으로 인덱스는 단일 샤드로 구성된다는 것을 앞서 배웠다.

## 그런데 샤드가 저장된 노드가 고장나는 디스크 장애가 발생했다면 어떻게 될까?

-   A: 복제하지 않았으면 데이터는 소실된다.

이것은 명백한 주요 문제이며 하드웨어가 언제든 잘못될 수 있다.
그러므로 언제든지 대체하여 작동할 수 있는 복제(replication)에 대해 고려해야 한다.

Elasticsearch는 샤드 복제를 지원하며 별도의 설정 없이 기본적으로 작동한다.
많은 DB가 기본적으로 복제 기능이 있으나, 이 기능을 설정하는 것은 복잡할 수 있다.

그래서 Elasticsearch는 복제 작업이 어떻게 작동하는가? index는 많은 샤드에 데이터를 저장하도록 설정되어 있다. 그리고 이것은 여러 노드에 교차하여 저장될 것이다. 이와 같이 복제는 index 레벨에서 설정된다.

1회 이상 복제된 샤드는 primary shard로써 참조될 수 있다.
주 샤드와 해당 복제본 샤드를 복제 그룹이라고 한다.
색인을 작성할 때 원하는 각 샤드의 복제본 수를 선택할 수 있으며, 하나는 기본값이다.
