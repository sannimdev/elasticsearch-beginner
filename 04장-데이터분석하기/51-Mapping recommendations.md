# Mapping recommendations

## 명시된 매핑을 사용하라

-   동적 매핑은 편리하지만, 실 서비스 환경에서는 그다지 좋은 방안은 아니다.
    -   개발 환경에서 사용하면 좋다
-   많은 document를 저장할 때 최적화된 매핑으로 디스크 공간을 절약하는 것이 좋다
-   dynamic은 "strict"로 설정하기 ("false" 말고)
    -   예상치 못한 결괏값을 피하는 것이 좋다

## 텍스트 필드 매핑하기

-   항상 문자열을 `text`나 `keyword`로 매핑하지 말라
    -   일반적으로 오로지 하나만 피룡하다
    -   각각 매핑하는 것은 디스크 공간을 요구한다
-   전체 텍스트 검색이 필요하다면?
    -   text로 매핑하기
-   정확한 값을 이용하여 축약, 정렬, 필터링이 필요하다면?
    -   keyword 매핑

## coercion(형 변환) 비활성화하기

-   형 변환은 옳은 일을 하지 않은 것들을 허용한다. (??)
    -   Coercion forgives you for not doing the right thing
-   올바르게 작업을 처리하라
-   가능한 한 항상 올바른 데이터 유형을 사용하라

## 적절한 숫자 데이터 타입 사용하기

-   전체 숫자는 `integer` 데이터 타입에 충분하다
    -   `long` 은 좀 더 큰 숫자를 저장하지만, 더 많은 공간이 필요하다
-   소숫점은 float 데이터 타입이 현명할 것이다.
    -   `double`은 더 높은 정확도를 가질 것이지만 2배의 공간이 더 필요하다.

## 파라미터 매핑

-   정렬, 축약, 스크립트가 필요하지 않다면 `doc_values`는 `false`로 설정하기
-   연관성 점수(relevance scoring)가 필요없다면 `norms`를 `false`로 설정하기
-   값을 필터링하는 것이 필요하지 않다면 `index`를 `false`로 설정하기
    -   축약을 여전히 할 수 있다. (time series data)
-   많은 document를 저장할 때 노력한 가치가 있을 것이다.
    -   그렇지 않으면 매우 복잡해질 것이다.
-   최악의 시나리오는 document를 재색인해야 한다.
